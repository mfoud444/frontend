import{d as G,r as n,aj as J,f as Q,ak as W,b as X,A as z,al as x,t as a,a3 as d,H as f,i as Y,am as Z,k as C,l as A,m as o,q as w,p as s,y as i,C as g,F as ee,an as te,D,P as ae,af as I,ah as se,ao as oe,ae as ne,v as ie,x as re,_ as le}from"./index-d44047d1.js";import{N as de}from"./Result-64cf6280.js";const ce=v=>(ie("data-v-acf79da0"),v=v(),re(),v),ue={class:"container_dashboard"},me={class:"header_dashboard"},fe={class:"flex gap-2 justify-end items-center"},ge={class:"flex gap-2 items-center"},ve={class:"hidden md:block"},pe={class:"flex gap-2 items-center"},ye={class:"hidden md:block"},he={class:"cursor-pointer"},_e={class:""},ke={key:0,class:"border-red-400 bg-red-100 p-4 rounded-lg"},be=ce(()=>o("div",null,null,-1)),R=3,xe=G({__name:"index",setup(v){const{iconRender:S}=te(),F=n(!1),N=n(!1),c=n(!0),l=n(!1),r=J(),u=n([]),{isMobile:h}=Q(),T=W(),m=X(),M=n(null),P=z(()=>r.listUniversity),B=z(()=>r.countTotalData),p=x({page:B,pageSize:R,showSizePicker:!0,onChange:e=>{p.page=e},onUpdatePageSize:e=>{p.pageSize=e,p.page=1}});function E(e){const t=T.warning({title:a("chat.deleteConfirmation"),content:a("chat.deleteConfirmationMessage"),positiveText:a("common.yes"),negativeText:a("common.no"),onPositiveClick:async()=>{try{t.loading=!0,await r.deleteUniversityAction(e.id),m.success(a("chat.deleteSuccess"))}catch{t.loading=!1,m.error(a("chat.deleteFailed"))}finally{t.loading=!1}}})}async function O(e){r.showModelUpdate=!0,M.value=e}const _=x({title:a("university.university"),key:"university",render(e){return d(CardUnversity,{row:e})}}),k=x([{type:"selection",options:["all","none"],disabled(e){return e.type_added==="default"}},_,{title:a("research.actions"),key:"actions",align:"center",width:100,render(e){return d("div",{class:"flex gap-1"},[d(f,{strong:!0,tertiary:!0,size:"small",loading:N.value,style:"border-radius:100%",onClick:async()=>{try{await O(e)}catch(t){console.error(a("common.updateFailed"),t.message)}}},{default:()=>d(S({icon:"fluent:edit-32-regular",color:"blue"}))}),d(f,{strong:!0,tertiary:!0,size:"small",loading:F.value,onClick:()=>E(e)},{default:()=>d(S({icon:"fluent:delete-32-regular",color:"red"}))})])}}]);async function U(){try{await r.fetchUniversitiesAction({limit:R,offset:1}),c.value=!0,c.value=!1,l.value=!1}catch(e){m.error(a("common.errorSomeThing")+" "+e.message),console.error(a("common.errorSomeThing"),e.message),console.error(l.value),l.value=!0,console.error(l.value),c.value=!1}}Y(async()=>{U()});const V=n(null);function K(e,t){_.filterOptionValue=e[t.key]}const $=n(k);function j(e){$.value.forEach(t=>{if(t.sortOrder!==void 0){if(!e){t.sortOrder=!1;return}t.key===e.columnKey?t.sortOrder=e.order:t.sortOrder=!1}})}const q=e=>e.id;function H(e){u.value=e}function L(){const e=T.warning({title:a("chat.deleteConfirmation"),content:a("chat.deleteConfirmationMessage"),positiveText:a("common.yes"),negativeText:a("common.no"),onPositiveClick:async()=>{try{e.loading=!0;const t=u.value.map(y=>r.deleteUniversityAction(y));await Promise.all(t),m.success(a("chat.deleteSuccess"))}catch(t){console.error(a("common.deleteFailed"),t.message),m.error(a("common.deleteFailed"))}finally{e.loading=!1}}})}return(e,t)=>{const y=Z("FilterTable");return C(),A(ee,null,[o("div",ue,[o("div",me,w(s(a)("university.universitys")),1),o("div",fe,[i(s(f),{onClick:t[0]||(t[0]=b=>s(r).showModelAdd=!0),type:"primary"},{default:g(()=>[o("div",ge,[i(s(D),{icon:"mdi:add-bold",class:"text-base"}),o("div",ve,w(s(a)("university.addUniversity")),1)])]),_:1}),i(s(f),{strong:"",secondary:"",type:"error",disabled:!(u.value.length>0),onClick:L},{default:g(()=>[o("div",pe,[i(s(D),{icon:"fluent:delete-32-regular",class:"text-base"}),o("div",ye,w(s(a)("common.delete")),1)])]),_:1},8,["disabled"]),o("div",he,[i(y,{mainColumn:_,columns:k},null,8,["mainColumn","columns"])])]),o("div",_e,[i(s(ne),{vertical:"",size:12},{default:g(()=>[l.value?(C(),A("div",ke,[i(s(de),{status:"error",title:"Error",description:"It's red"},{footer:g(()=>[i(s(f),{size:"small",loading:c.value,onClick:t[1]||(t[1]=b=>U())},{default:g(()=>[ae(" try Again ")]),_:1},8,["loading"])]),_:1})])):I("",!0),l.value?I("",!0):(C(),se(s(oe),{key:1,remote:"",size:(s(h),"small"),striped:"",loading:c.value,ref_key:"dataTableInst",ref:V,columns:k,data:P.value,pagination:p,"max-height":s(h)?400:370,"min-height":s(h)?380:370,"paginate-single-page":!1,"checked-row-keys":u.value,"onUpdate:checkedRowKeys":[t[2]||(t[2]=b=>u.value=b),H],"onUpdate:filters":K,"onUpdate:sorter":j,"row-key":q},null,8,["size","loading","columns","data","pagination","max-height","min-height","checked-row-keys"]))]),_:1})])]),be],64)}}});const Te=le(xe,[["__scopeId","data-v-acf79da0"]]);export{Te as default};
